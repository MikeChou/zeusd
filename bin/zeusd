require "thor"
require "zeusd"

class ZeusdCLI < Thor
  class_option :debug,    :type => :boolean
  class_option :verbose,  :type => :boolean,  :alias => :v
  class_option :pidfile,  :type => :string,   :alias => :p
  class_option :logfile,  :type => :string,   :alias => :l
  class_option :cwd,      :type => :string,   :alias => :d

  desc "start", "."
  def start
    stop
    daemon = Zeusd::Daemon.new(:debug => options[:debug])
    daemon.start!
    daemon.block_until_loaded
  end

  desc "restart", "."
  def restart
    Zeusd::Daemon.new(options).stop!
    Zeusd::Daemon.new(options).start!
  end

  desc "stop", "."
  def stop
    Zeusd::Daemon.new(options).stop!
  end

  desc "status", "."
  def status
    # Zeusd::Daemon.new(options).stop!
  end

end

ZeusdCLI.start(ARGV)