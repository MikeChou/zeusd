require "thor"
require "zeusd"

class ZeusdCLI < Thor
  class_option :verbose,  :type => :boolean,  :aliases => :v
  class_option :block,    :type => :boolean,  :aliases => :b
  class_option :cwd,      :type => :string,   :aliases => :d
  class_option :pidfile,  :type => :string,   :aliases => :p
  class_option :logfile,  :type => :string,   :aliases => :l

  desc "start", "."
  def start
    stop
    daemon.start! :block => options[:block]
  end

  desc "restart", "."
  def restart
    stop
    start
  end

  desc "stop", "."
  def stop
    daemon.stop!
  end

  desc "status", "."
  def status

  end

  protected

  def daemon
    Zeusd::Daemon.new(:verbose => options[:verbose])
  end

end

ZeusdCLI.start(ARGV)